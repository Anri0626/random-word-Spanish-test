<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>スペイン語動詞クイズ</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; }
    h1 { text-align: center; }
    .question { font-size: 24px; margin: 20px 0; }
    .options button { margin: 5px; padding: 10px 20px; font-size: 18px; }
    .feedback { font-size: 18px; margin-top: 10px; }
    .pattern, .translation, .example { margin-top: 5px; color: #444; }
    #wrong-list { margin-top: 30px; padding-top: 20px; border-top: 1px solid #ccc; }
    .wrong-word { margin: 5px 0; }
  </style>
</head>
<body>
  <h1>スペイン語動詞クイズ（規則／不規則／再帰）</h1>
  <div class="question" id="verb">Loading...</div>
  <div class="options">
    <button onclick="checkAnswer('規則')">規則</button>
    <button onclick="checkAnswer('不規則')">不規則</button>
    <button onclick="checkAnswer('再帰')">再帰</button>
  </div>
  <div class="feedback" id="feedback"></div>
  <div class="pattern" id="pattern"></div>
  <button onclick="showDetails()">意味・例文を見る</button>
  <div class="translation" id="translation"></div>
  <div class="example" id="example"></div>
  <button onclick="nextQuestion()">次の問題へ ➤</button>

  <div id="wrong-list">
    <h3>❌ 間違えた動詞リスト</h3>
    <div id="wrongWords"></div>
  </div>

  <script>
    const verbs = [
      { infinitive: "hablar", type: "規則", group: "-ar", translation: "話す", example: "Yo hablo español." },
      { infinitive: "comer", type: "規則", group: "-er", translation: "食べる", example: "Nosotros comemos arroz." },
      { infinitive: "vivir", type: "規則", group: "-ir", translation: "住む", example: "Ella vive en Madrid." },
      { infinitive: "leer", type: "規則", group: "-er", translation: "読む", example: "Leo muchos libros." },
      { infinitive: "escribir", type: "規則", group: "-ir", translation: "書く", example: "Escribimos un correo." },

      { infinitive: "ser", type: "不規則", group: "-", translation: "〜である", example: "Yo soy estudiante.", pattern: "完全不規則" },
      { infinitive: "estar", type: "不規則", group: "-ar", translation: "いる、ある", example: "Estoy en casa.", pattern: "完全不規則" },
      { infinitive: "ir", type: "不規則", group: "-", translation: "行く", example: "Vamos al cine.", pattern: "完全不規則" },
      { infinitive: "tener", type: "不規則", group: "-er", translation: "持つ", example: "Tengo un libro.", pattern: "yo不規則（tengo）＋語幹変化 e→ie" },
      { infinitive: "decir", type: "不規則", group: "-ir", translation: "言う", example: "Digo la verdad.", pattern: "yo不規則（digo）＋語幹変化 e→i" },
      { infinitive: "jugar", type: "不規則", group: "-ar", translation: "遊ぶ", example: "Jugamos al fútbol.", pattern: "語幹変化 u→ue" },
      { infinitive: "cerrar", type: "不規則", group: "-ar", translation: "閉める", example: "Cierro la puerta.", pattern: "語幹変化 e→ie" },
      { infinitive: "salir", type: "不規則", group: "-ir", translation: "出る", example: "Salgo de casa a las 8.", pattern: "yo不規則（salgo）" },
      { infinitive: "poner", type: "不規則", group: "-er", translation: "置く", example: "Pongo la mesa.", pattern: "yo不規則（pongo）" },

      { infinitive: "levantarse", type: "再帰", group: "-ar", translation: "起きる", example: "Me levanto a las 7." },
      { infinitive: "acostarse", type: "再帰", group: "-ar", translation: "寝る", example: "Me acuesto tarde.", pattern: "語幹変化 o→ue＋再帰" },
      { infinitive: "bañarse", type: "再帰", group: "-ar", translation: "入浴する", example: "Me baño por la noche." },
      { infinitive: "vestirse", type: "再帰", group: "-ir", translation: "服を着る", example: "Me visto rápido.", pattern: "語幹変化 e→i＋再帰" },
      { infinitive: "llamarse", type: "再帰", group: "-ar", translation: "〜という名前である", example: "Me llamo Ana." }
    ];

    let currentVerb;
    let wrongAnswers = [];

    function getRandomVerb() {
      return verbs[Math.floor(Math.random() * verbs.length)];
    }

    function displayVerb() {
      currentVerb = getRandomVerb();
      document.getElementById("verb").textContent = `次の動詞は何の種類？： ${currentVerb.infinitive}`;
      document.getElementById("feedback").textContent = "";
      document.getElementById("pattern").textContent = "";
      document.getElementById("translation").textContent = "";
      document.getElementById("example").textContent = "";
    }

    function checkAnswer(choice) {
      const feedback = document.getElementById("feedback");
      const patternBox = document.getElementById("pattern");

      if (choice === currentVerb.type) {
        feedback.textContent = "✅ 正解！";
        feedback.style.color = "green";
      } else {
        feedback.textContent = `❌ 不正解！正解：${currentVerb.type}`;
        feedback.style.color = "red";
        wrongAnswers.push(currentVerb);
        updateWrongList();
      }

      // 👇 不規則動詞やパターンがある場合だけ表示！
      if (currentVerb.type === "不規則" && currentVerb.pattern) {
        patternBox.textContent = `🔍 不規則の種類：${currentVerb.pattern}`;
      } else if (currentVerb.type === "再帰" && currentVerb.pattern) {
        patternBox.textContent = `🔍 特徴：${currentVerb.pattern}`;
      } else {
        patternBox.textContent = "";
      }
    }

    function showDetails() {
      document.getElementById("translation").textContent = "意味：" + currentVerb.translation;
      document.getElementById("example").textContent = "例文：" + currentVerb.example;
    }

    function nextQuestion() {
      displayVerb();
    }

    function updateWrongList() {
      const container = document.getElementById("wrongWords");
      container.innerHTML = "";
      const unique = [...new Set(wrongAnswers.map(v => v.infinitive))];
      unique.forEach(verb => {
        const div = document.createElement("div");
        div.className = "wrong-word";
        div.textContent = verb;
        container.appendChild(div);
      });
    }

    displayVerb();
  </script>
</body>
</html>
