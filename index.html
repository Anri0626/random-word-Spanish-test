<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ã‚¹ãƒšã‚¤ãƒ³èªå‹•è©ã‚¯ã‚¤ã‚º</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 1000px; margin: auto; display: flex; flex-wrap: wrap; }
    h1 { text-align: center; width: 100%; }
    .left { flex: 1; min-width: 300px; }
    .right { flex: 1; min-width: 300px; padding-left: 30px; }

    .question { font-size: 24px; margin: 20px 0; }
    button {
      padding: 15px 30px;
      font-size: 20px;
      border-radius: 8px;
      cursor: pointer;
      margin: 15px 10px 0 0;
      transition: background-color 0.3s ease;
      box-sizing: border-box;
    }
    button:hover { background-color: #eee; }

    .options button { margin: 10px; }
    .feedback { font-size: 18px; margin-top: 10px; }
    .pattern, .translation, .example { margin-top: 5px; }
    #wrong-list { margin-top: 30px; padding-top: 20px; border-top: 1px solid #ccc; }
    .wrong-word { margin: 5px 0; }

    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    td { padding: 4px 8px; border-bottom: 1px solid #ccc; }

    @media screen and (max-width: 768px) {
      body { flex-direction: column; }
      .right { padding-left: 0; }
      button { width: 100%; font-size: 22px; margin: 10px 0; }
      .options button { margin: 10px 0; }
    }
  </style>
</head>
<body>
  <div class="left">
    <h1>ã‚¹ãƒšã‚¤ãƒ³èªå‹•è©ã‚¯ã‚¤ã‚º</h1>
    <div class="question" id="verb">Loading...</div>
    <div class="options">
      <button onclick="checkAnswer('è¦å‰‡')">è¦å‰‡</button>
      <button onclick="checkAnswer('ä¸è¦å‰‡')">ä¸è¦å‰‡</button>
      <button onclick="checkAnswer('åˆ†ã‹ã‚‰ãªã„')">åˆ†ã‹ã‚‰ãªã„</button>
    </div>
    <div class="feedback" id="feedback"></div>
    <div class="pattern" id="pattern"></div>
    <div class="translation" id="translation"></div>
    <div class="example" id="example"></div>
    <button onclick="nextQuestion()">æ¬¡ã®å•é¡Œã¸ â¤</button>
    <div id="wrong-list">
      <h3>âŒ é–“é•ãˆãŸå‹•è©ãƒªã‚¹ãƒˆ</h3>
      <div id="wrongWords"></div>
    </div>
  </div>

  <div class="right">
    <h3>ğŸ”¤ æ´»ç”¨è¡¨</h3>
    <div id="conjugation"></div>
  </div>

  <script>
    const verbs = [
      {
        infinitive: "ir", type: "ä¸è¦å‰‡", group: "-", translation: "è¡Œã",
        example: "Voy a la escuela.", pattern: "å®Œå…¨ä¸è¦å‰‡",
        conjugation: {
          yo: "voy", tÃº: "vas", Ã©l: "va", nosotros: "vamos", vosotros: "vais", ellos: "van"
        }
      },
      {
        infinitive: "cantar", type: "è¦å‰‡", group: "-ar", translation: "æ­Œã†",
        example: "Yo canto una canciÃ³n.",
        conjugation: {
          yo: "canto", tÃº: "cantas", Ã©l: "canta", nosotros: "cantamos", vosotros: "cantÃ¡is", ellos: "cantan"
        }
      },
      {
        infinitive: "ser", type: "ä¸è¦å‰‡", group: "-", translation: "ã€œã§ã‚ã‚‹",
        example: "Soy estudiante.", pattern: "å®Œå…¨ä¸è¦å‰‡",
        conjugation: {
          yo: "soy", tÃº: "eres", Ã©l: "es", nosotros: "somos", vosotros: "sois", ellos: "son"
        }
      },
      {
        infinitive: "comer", type: "è¦å‰‡", group: "-er", translation: "é£Ÿã¹ã‚‹",
        example: "Comemos arroz.",
        conjugation: {
          yo: "como", tÃº: "comes", Ã©l: "come", nosotros: "comemos", vosotros: "comÃ©is", ellos: "comen"
        }
      }
    ];

    let currentVerb;
    let wrongAnswers = [];

    function getRandomVerb() {
      return verbs[Math.floor(Math.random() * verbs.length)];
    }

    function displayVerb() {
      currentVerb = getRandomVerb();
      document.getElementById("verb").textContent = `æ¬¡ã®å‹•è©ã¯ä½•ã®ç¨®é¡ï¼Ÿï¼š ${currentVerb.infinitive}`;
      document.getElementById("feedback").textContent = "";
      document.getElementById("pattern").innerHTML = "";
      document.getElementById("translation").textContent = "";
      document.getElementById("example").innerHTML = "";
      document.getElementById("conjugation").innerHTML = "";
    }

    function checkAnswer(choice) {
      const feedback = document.getElementById("feedback");
      const patternBox = document.getElementById("pattern");

      if (choice === currentVerb.type) {
        feedback.textContent = "âœ… æ­£è§£ï¼";
        feedback.style.color = "green";
      } else {
        feedback.textContent = `âŒ ä¸æ­£è§£ï¼æ­£è§£ï¼š${currentVerb.type}`;
        feedback.style.color = "red";
        if (choice !== "åˆ†ã‹ã‚‰ãªã„") wrongAnswers.push(currentVerb);
        updateWrongList();
      }

      if (currentVerb.pattern) {
        patternBox.innerHTML = `<span style="color: red; font-size: 18px;">ğŸ” ç‰¹å¾´ï¼š${currentVerb.pattern}</span>`;
      }

      showDetails();
      showConjugation();
    }

    function showDetails() {
      document.getElementById("translation").textContent = "æ„å‘³ï¼š" + currentVerb.translation;
      document.getElementById("example").innerHTML = "ä¾‹æ–‡ï¼š" + currentVerb.example;
    }

    function showConjugation() {
      const box = document.getElementById("conjugation");
      const conj = currentVerb.conjugation;
      if (!conj) {
        box.innerHTML = "ã“ã®å‹•è©ã®æ´»ç”¨æƒ…å ±ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚";
        return;
      }
      box.innerHTML = `
        <table>
          <tr><td>yo</td><td>${conj.yo}</td></tr>
          <tr><td>tÃº</td><td>${conj.tÃº}</td></tr>
          <tr><td>Ã©l/ella/usted</td><td>${conj.Ã©l}</td></tr>
          <tr><td>nosotros/as</td><td>${conj.nosotros}</td></tr>
          <tr><td>vosotros/as</td><td>${conj.vosotros}</td></tr>
          <tr><td>ellos/ellas/ustedes</td><td>${conj.ellos}</td></tr>
        </table>
      `;
    }

    function nextQuestion() {
      displayVerb();
    }

    function updateWrongList() {
      const container = document.getElementById("wrongWords");
      container.innerHTML = "";
      const unique = [...new Set(wrongAnswers.map(v => v.infinitive))];
      unique.forEach(verb => {
        const div = document.createElement("div");
        div.className = "wrong-word";
        div.textContent = verb;
        container.appendChild(div);
      });
    }

    displayVerb();
  </script>
</body>
</html>
