<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ã‚¹ãƒšã‚¤ãƒ³èªå‹•è©ã‚¯ã‚¤ã‚º</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; }
    h1 { text-align: center; }

    .question { font-size: 24px; margin: 20px 0; }

    button {
      padding: 15px 30px;
      font-size: 20px;
      border-radius: 8px;
      cursor: pointer;
      margin: 15px 10px 0 0;
      transition: background-color 0.3s ease;
      box-sizing: border-box;
    }
    button:hover {
      background-color: #eee;
    }

    .options button {
      margin: 10px;
    }

    .feedback { font-size: 18px; margin-top: 10px; }
    .pattern, .translation, .example { margin-top: 5px; }
    #wrong-list { margin-top: 30px; padding-top: 20px; border-top: 1px solid #ccc; }
    .wrong-word { margin: 5px 0; }

    @media screen and (max-width: 480px) {
      button {
        width: 100%;
        padding: 20px 0;
        font-size: 22px;
        margin: 10px 0;
      }
      .options button {
        margin: 10px 0;
      }
    }
  </style>
</head>
<body>
  <h1>ã‚¹ãƒšã‚¤ãƒ³èªå‹•è©ã‚¯ã‚¤ã‚ºï¼ˆè¦å‰‡ï¼ä¸è¦å‰‡ï¼‰</h1>
  <div class="question" id="verb">Loading...</div>
  <div class="options">
    <button onclick="checkAnswer('è¦å‰‡')">è¦å‰‡</button>
    <button onclick="checkAnswer('ä¸è¦å‰‡')">ä¸è¦å‰‡</button>
    <button onclick="giveUp()">åˆ†ã‹ã‚‰ãªã„</button>
  </div>
  <div class="feedback" id="feedback"></div>
  <div class="pattern" id="pattern"></div>
  <button onclick="showDetails()">æ„å‘³ãƒ»ä¾‹æ–‡ã‚’è¦‹ã‚‹</button>
  <div class="translation" id="translation"></div>
  <div class="example" id="example"></div>
  <button onclick="nextQuestion()">æ¬¡ã®å•é¡Œã¸ â¤</button>
  <div id="wrong-list">
    <h3>âŒ é–“é•ãˆãŸå‹•è©ãƒªã‚¹ãƒˆ</h3>
    <div id="wrongWords"></div>
  </div>
  <script>
    const verbs = [
      // è¦å‰‡å‹•è©ï¼ˆå†å¸°ã‚‚ã“ã“ã«isReflexive:trueã§å«ã‚€ï¼‰
      { infinitive: "cantar", type: "è¦å‰‡", isReflexive: false, translation: "æ­Œã†", example: "Yo canto una canciÃ³n." },
      { infinitive: "cenar", type: "è¦å‰‡", isReflexive: false, translation: "å¤•é£Ÿã‚’ã¨ã‚‹", example: "Cenamos a las ocho." },
      { infinitive: "comprar", type: "è¦å‰‡", isReflexive: false, translation: "è²·ã†", example: "Compro pan en la tienda." },
      { infinitive: "estudiar", type: "è¦å‰‡", isReflexive: false, translation: "å‹‰å¼·ã™ã‚‹", example: "Estudian espaÃ±ol." },
      { infinitive: "tomar", type: "è¦å‰‡", isReflexive: false, translation: "å–ã‚‹ï¼é£²ã‚€", example: "Tomamos cafÃ©." },
      { infinitive: "trabajar", type: "è¦å‰‡", isReflexive: false, translation: "åƒã", example: "Trabajo en una oficina." },
      { infinitive: "aprender", type: "è¦å‰‡", isReflexive: false, translation: "å­¦ã¶", example: "Aprendemos japonÃ©s." },
      { infinitive: "beber", type: "è¦å‰‡", isReflexive: false, translation: "é£²ã‚€", example: "Bebo agua." },
      { infinitive: "comprender", type: "è¦å‰‡", isReflexive: false, translation: "ç†è§£ã™ã‚‹", example: "Â¿Comprendes?" },
      { infinitive: "leer", type: "è¦å‰‡", isReflexive: false, translation: "èª­ã‚€", example: "Leo muchos libros." },
      { infinitive: "abrir", type: "è¦å‰‡", isReflexive: false, translation: "é–‹ã‘ã‚‹", example: "Abro la puerta." },
      { infinitive: "asistir", type: "è¦å‰‡", isReflexive: false, translation: "å‡ºå¸­ã™ã‚‹", example: "Asisto a clase." },
      { infinitive: "escribir", type: "è¦å‰‡", isReflexive: false, translation: "æ›¸ã", example: "Escribimos un correo." },
      { infinitive: "partir", type: "è¦å‰‡", isReflexive: false, translation: "å‡ºç™ºã™ã‚‹", example: "Parten maÃ±ana." },
      { infinitive: "recibir", type: "è¦å‰‡", isReflexive: false, translation: "å—ã‘å–ã‚‹", example: "Recibimos una carta." },
      { infinitive: "subir", type: "è¦å‰‡", isReflexive: false, translation: "ç™»ã‚‹ï¼ä¸ŠãŒã‚‹", example: "Subo las escaleras." },
      { infinitive: "vivir", type: "è¦å‰‡", isReflexive: false, translation: "ä½ã‚€", example: "Vivo en Tokio." },

      // å†å¸°å‹•è©ï¼ˆè¦å‰‡ã‚¿ã‚¤ãƒ—ã®ã‚‚ã®ä¾‹ï¼‰
      { infinitive: "levantarse", type: "è¦å‰‡", isReflexive: true, translation: "èµ·ãã‚‹", example: "Me levanto a las siete." },
      { infinitive: "baÃ±arse", type: "è¦å‰‡", isReflexive: true, translation: "å…¥æµ´ã™ã‚‹", example: "Me baÃ±o por la noche." },

      // ä¸è¦å‰‡å‹•è©
      { infinitive: "ser", type: "ä¸è¦å‰‡", isReflexive: false, translation: "ã€œã§ã‚ã‚‹", example: "Soy estudiante.", pattern: "å®Œå…¨ä¸è¦å‰‡" },
      { infinitive: "estar", type: "ä¸è¦å‰‡", isReflexive: false, translation: "ã„ã‚‹ã€ã‚ã‚‹", example: "Estoy cansado.", pattern: "å®Œå…¨ä¸è¦å‰‡" },
      { infinitive: "ir", type: "ä¸è¦å‰‡", isReflexive: false, translation: "è¡Œã", example: "Voy a la escuela.", pattern: "å®Œå…¨ä¸è¦å‰‡" },
      { infinitive: "tener", type: "ä¸è¦å‰‡", isReflexive: false, translation: "æŒã¤", example: "Tengo un libro.", pattern: "yoä¸è¦å‰‡ï¼ˆtengoï¼‰ï¼‹èªå¹¹å¤‰åŒ– eâ†’ie" },
      { infinitive: "decir", type: "ä¸è¦å‰‡", isReflexive: false, translation: "è¨€ã†", example: "Digo la verdad.", pattern: "yoä¸è¦å‰‡ï¼ˆdigoï¼‰ï¼‹èªå¹¹å¤‰åŒ– eâ†’i" },
      { infinitive: "hacer", type: "ä¸è¦å‰‡", isReflexive: false, translation: "ã™ã‚‹", example: "Hago la tarea.", pattern: "yoä¸è¦å‰‡ï¼ˆhagoï¼‰" },
      { infinitive: "salir", type: "ä¸è¦å‰‡", isReflexive: false, translation: "å‡ºã‚‹", example: "Salgo de casa.", pattern: "yoä¸è¦å‰‡ï¼ˆsalgoï¼‰" },
      { infinitive: "poner", type: "ä¸è¦å‰‡", isReflexive: false, translation: "ç½®ã", example: "Pongo la mesa.", pattern: "yoä¸è¦å‰‡ï¼ˆpongoï¼‰" },
      { infinitive: "conocer", type: "ä¸è¦å‰‡", isReflexive: false, translation: "çŸ¥ã£ã¦ã„ã‚‹", example: "Conozco a MarÃ­a.", pattern: "yoä¸è¦å‰‡ï¼ˆconozcoï¼‰" },
      { infinitive: "conducir", type: "ä¸è¦å‰‡", isReflexive: false, translation: "é‹è»¢ã™ã‚‹", example: "Conduzco un coche.", pattern: "yoä¸è¦å‰‡ï¼ˆconduzcoï¼‰" },
      { infinitive: "ver", type: "ä¸è¦å‰‡", isReflexive: false, translation: "è¦‹ã‚‹", example: "Veo la televisiÃ³n.", pattern: "yoä¸è¦å‰‡ï¼ˆveoï¼‰" },
      { infinitive: "dar", type: "ä¸è¦å‰‡", isReflexive: false, translation: "ä¸ãˆã‚‹", example: "Doy un regalo.", pattern: "yoä¸è¦å‰‡ï¼ˆdoyï¼‰" },
      { infinitive: "traer", type: "ä¸è¦å‰‡", isReflexive: false, translation: "æŒã£ã¦ãã‚‹", example: "Traigo la mochila.", pattern: "yoä¸è¦å‰‡ï¼ˆtraigoï¼‰" },
      { infinitive: "cerrar", type: "ä¸è¦å‰‡", isReflexive: false, translation: "é–‰ã‚ã‚‹", example: "Cierro la puerta.", pattern: "èªå¹¹å¤‰åŒ– eâ†’ie" },
      { infinitive: "empezar", type: "ä¸è¦å‰‡", isReflexive: false, translation: "å§‹ã‚ã‚‹", example: "Empiezo ahora.", pattern: "èªå¹¹å¤‰åŒ– eâ†’ie" },
      { infinitive: "pensar", type: "ä¸è¦å‰‡", isReflexive: false, translation: "è€ƒãˆã‚‹", example: "Pienso mucho.", pattern: "èªå¹¹å¤‰åŒ– eâ†’ie" },
      { infinitive: "entender", type: "ä¸è¦å‰‡", isReflexive: false, translation: "ç†è§£ã™ã‚‹", example: "Entiendo bien.", pattern: "èªå¹¹å¤‰åŒ– eâ†’ie" },
      { infinitive: "preferir", type: "ä¸è¦å‰‡", isReflexive: false, translation: "å¥½ã‚€", example: "Prefiero tÃ©.", pattern: "èªå¹¹å¤‰åŒ– eâ†’ie" },
      { infinitive: "contar", type: "ä¸è¦å‰‡", isReflexive: false, translation: "æ•°ãˆã‚‹ï¼èªã‚‹", example: "Cuento hasta diez.", pattern: "èªå¹¹å¤‰åŒ– oâ†’ue" },
      { infinitive: "dormir", type: "ä¸è¦å‰‡", isReflexive: false, translation: "çœ ã‚‹", example: "Duermo ocho horas.", pattern: "èªå¹¹å¤‰åŒ– oâ†’ue" },
      { infinitive: "poder", type: "ä¸è¦å‰‡", isReflexive: false, translation: "ã€œã§ãã‚‹", example: "Puedo hablar espaÃ±ol.", pattern: "èªå¹¹å¤‰åŒ– oâ†’ue" },
      { infinitive: "volver", type: "ä¸è¦å‰‡", isReflexive: false, translation: "æˆ»ã‚‹", example: "Vuelvo pronto.", pattern: "èªå¹¹å¤‰åŒ– oâ†’ue" },
      { infinitive: "morir", type: "ä¸è¦å‰‡", isReflexive: false, translation: "æ­»ã¬", example: "Muere en la pelÃ­cula.", pattern: "èªå¹¹å¤‰åŒ– oâ†’ue" },
      { infinitive: "pedir", type: "ä¸è¦å‰‡", isReflexive: false, translation: "é ¼ã‚€", example: "Pido ayuda.", pattern: "èªå¹¹å¤‰åŒ– eâ†’i" },
      { infinitive: "servir", type: "ä¸è¦å‰‡", isReflexive: false, translation: "ä»•ãˆã‚‹ï¼å‡ºã™", example: "Sirvo la comida.", pattern: "èªå¹¹å¤‰åŒ– eâ†’i" },
      { infinitive: "oÃ­r", type: "ä¸è¦å‰‡", isReflexive: false, translation: "èã", example: "Oigo mÃºsica.", pattern: "yoä¸è¦å‰‡ï¼ˆoigoï¼‰ï¼‹ç¶´ã‚Šå¤‰åŒ–" },
      { infinitive: "saber", type: "ä¸è¦å‰‡", isReflexive: false, translation: "çŸ¥ã£ã¦ã„ã‚‹", example: "SÃ© la respuesta.", pattern: "yoä¸è¦å‰‡ï¼ˆsÃ©ï¼‰" },
      { infinitive: "querer", type: "ä¸è¦å‰‡", isReflexive: false, translation: "æ¬²ã—ã„ï¼ã€œã—ãŸã„", example: "Quiero un cafÃ©.", pattern: "èªå¹¹å¤‰åŒ– eâ†’ie" }
    ];

    let currentVerb;
    let wrongAnswers = [];

    function getRandomVerb() {
      return verbs[Math.floor(Math.random() * verbs.length)];
    }

    function displayVerb() {
      currentVerb = getRandomVerb();
      const reflexiveHint = currentVerb.isReflexive ? "ï¼ˆå†å¸°å‹•è©ã§ã™ï¼‰" : "";
      document.getElementById("verb").textContent = `æ¬¡ã®å‹•è©ã¯ä½•ã®ç¨®é¡ï¼Ÿï¼š ${currentVerb.infinitive} ${reflexiveHint}`;
      document.getElementById("feedback").textContent = "";
      document.getElementById("pattern").innerHTML = "";
      document.getElementById("translation").textContent = "";
      document.getElementById("example").innerHTML = "";
    }

    function checkAnswer(choice) {
      const feedback = document.getElementById("feedback");
      const patternBox = document.getElementById("pattern");

      if (choice === currentVerb.type) {
        feedback.textContent = "âœ… æ­£è§£ï¼";
        feedback.style.color = "green";
      } else {
        feedback.textContent = `âŒ ä¸æ­£è§£ï¼æ­£è§£ï¼š${currentVerb.type}`;
        feedback.style.color = "red";
        wrongAnswers.push(currentVerb);
        updateWrongList();
      }

      if (currentVerb.pattern) {
        patternBox.innerHTML = `<span style="color: red; font-size: 18px;">ğŸ” ä¸è¦å‰‡ã®ç¨®é¡ï¼š${currentVerb.pattern}</span>`;
      } else {
        patternBox.innerHTML = "";
      }

      showDetails();
    }

    function giveUp() {
      const feedback = document.getElementById("feedback");
      const patternBox = document.getElementById("pattern");

      feedback.textContent = `ğŸ‘‰ æ­£è§£ã¯ã€Œ${currentVerb.type}ã€ã§ã™ã€‚`;
      feedback.style.color = "blue";

      if (currentVerb.pattern) {
        patternBox.innerHTML = `<span style="color: blue; font-size: 18px;">ğŸ” ä¸è¦å‰‡ã®ç¨®é¡ï¼š${currentVerb.pattern}</span>`;
      } else {
        patternBox.innerHTML = "";
      }

      // åˆ†ã‹ã‚‰ãªã‹ã£ãŸã®ã§é–“é•ãˆãƒªã‚¹ãƒˆã«å…¥ã‚Œã‚‹
      wrongAnswers.push(currentVerb);
      updateWrongList();

      showDetails();
    }

    function showDetails() {
      document.getElementById("translation").textContent = "æ„å‘³ï¼š" + currentVerb.translation;
      document.getElementById("example").innerHTML = "ä¾‹æ–‡ï¼š" + currentVerb.example;
    }

    function nextQuestion() {
      displayVerb();
    }

    function updateWrongList() {
      const container = document.getElementById("wrongWords");
      container.innerHTML = "";
      const unique = [...new Set(wrongAnswers.map(v => v.infinitive))];
      unique.forEach(verb => {
        const div = document.createElement("div");
        div.className = "wrong-word";
        div.textContent = verb;
        container.appendChild(div);
      });
    }

    // æœ€åˆã®å•é¡Œè¡¨ç¤º
    displayVerb();
  </script>
</body>
</html>
