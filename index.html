<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ã‚¹ãƒšã‚¤ãƒ³èªå‹•è©ã‚¯ã‚¤ã‚º</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      max-width: 1000px;
      margin: auto;
      display: flex;
      flex-direction: row;
      gap: 30px;
    }
    .main {
      flex: 1;
    }
    .question {
      font-size: 24px;
      margin: 20px 0;
    }
    button {
      padding: 15px 30px;
      font-size: 20px;
      border-radius: 8px;
      cursor: pointer;
      margin: 10px;
      transition: background-color 0.3s ease;
      box-sizing: border-box;
    }
    button:hover {
      background-color: #eee;
    }
    .feedback, .pattern, .translation, .example {
      font-size: 18px;
      margin-top: 10px;
    }
    .wrong-word { margin: 5px 0; }
    #wrong-list {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #ccc;
    }
    .conjugation-box {
      flex: 0 0 300px;
      border-left: 1px solid #ccc;
      padding-left: 20px;
    }
    @media screen and (max-width: 800px) {
      body {
        flex-direction: column;
      }
      .conjugation-box {
        border-left: none;
        border-top: 1px solid #ccc;
        padding-left: 0;
        padding-top: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="main">
    <h1>ã‚¹ãƒšã‚¤ãƒ³èªå‹•è©ã‚¯ã‚¤ã‚ºï¼ˆè¦å‰‡ï¼ä¸è¦å‰‡ï¼‰</h1>
    <div class="question" id="verb">Loading...</div>
    <div class="options">
      <button onclick="checkAnswer('è¦å‰‡')">è¦å‰‡</button>
      <button onclick="checkAnswer('ä¸è¦å‰‡')">ä¸è¦å‰‡</button>
      <button onclick="checkAnswer('åˆ†ã‹ã‚‰ãªã„')">åˆ†ã‹ã‚‰ãªã„</button>
    </div>
    <div class="feedback" id="feedback"></div>
    <div class="pattern" id="pattern"></div>
    <div class="translation" id="translation"></div>
    <div class="example" id="example"></div>
    <button onclick="nextQuestion()">æ¬¡ã®å•é¡Œã¸ â¤</button>
    <div id="wrong-list">
      <h3>âŒ é–“é•ãˆãŸå‹•è©ãƒªã‚¹ãƒˆ</h3>
      <div id="wrongWords"></div>
    </div>
  </div>
  <div class="conjugation-box">
    <h2>æ´»ç”¨è¡¨</h2>
    <div id="conjugation"></div>
  </div>

  <script>
    const verbs = [
      { infinitive: "cantar", type: "è¦å‰‡", group: "-ar", translation: "æ­Œã†", example: "Yo canto una canciÃ³n." },
      { infinitive: "comer", type: "è¦å‰‡", group: "-er", translation: "é£Ÿã¹ã‚‹", example: "Comes bien." },
      { infinitive: "vivir", type: "è¦å‰‡", group: "-ir", translation: "ä½ã‚€", example: "Vivo en Tokio." },
      { infinitive: "ser", type: "ä¸è¦å‰‡", group: "-", translation: "ã€œã§ã‚ã‚‹", example: "Soy estudiante.", pattern: "å®Œå…¨ä¸è¦å‰‡" },
      { infinitive: "ir", type: "ä¸è¦å‰‡", group: "-", translation: "è¡Œã", example: "Voy a la escuela.", pattern: "å®Œå…¨ä¸è¦å‰‡" },
      { infinitive: "tener", type: "ä¸è¦å‰‡", group: "-er", translation: "æŒã¤", example: "Tengo un libro.", pattern: "yoä¸è¦å‰‡ï¼‹èªå¹¹å¤‰åŒ–" },
      { infinitive: "decir", type: "ä¸è¦å‰‡", group: "-ir", translation: "è¨€ã†", example: "Digo la verdad.", pattern: "yoä¸è¦å‰‡ï¼‹èªå¹¹å¤‰åŒ–" }
    ];

    const conjugations = {
      "cantar": ["canto", "cantas", "canta", "cantamos", "cantÃ¡is", "cantan"],
      "comer": ["como", "comes", "come", "comemos", "comÃ©is", "comen"],
      "vivir": ["vivo", "vives", "vive", "vivimos", "vivÃ­s", "viven"],
      "ser": ["soy", "eres", "es", "somos", "sois", "son"],
      "ir": ["voy", "vas", "va", "vamos", "vais", "van"],
      "tener": ["tengo", "tienes", "tiene", "tenemos", "tenÃ©is", "tienen"],
      "decir": ["digo", "dices", "dice", "decimos", "decÃ­s", "dicen"]
    };

    let currentVerb;
    let wrongAnswers = [];

    function getRandomVerb() {
      return verbs[Math.floor(Math.random() * verbs.length)];
    }

    function displayVerb() {
      currentVerb = getRandomVerb();
      document.getElementById("verb").textContent = `æ¬¡ã®å‹•è©ã¯ä½•ã®ç¨®é¡ï¼Ÿï¼š ${currentVerb.infinitive}`;
      document.getElementById("feedback").textContent = "";
      document.getElementById("pattern").textContent = "";
      document.getElementById("translation").textContent = "";
      document.getElementById("example").textContent = "";
      document.getElementById("conjugation").innerHTML = "";
    }

    function checkAnswer(choice) {
      const feedback = document.getElementById("feedback");
      const patternBox = document.getElementById("pattern");

      if (choice === currentVerb.type || choice === "åˆ†ã‹ã‚‰ãªã„") {
        feedback.textContent = choice === currentVerb.type ? "âœ… æ­£è§£ï¼" : `â„¹ï¸ æ­£è§£ï¼š${currentVerb.type}`;
        feedback.style.color = choice === currentVerb.type ? "green" : "blue";
      } else {
        feedback.textContent = `âŒ ä¸æ­£è§£ï¼æ­£è§£ï¼š${currentVerb.type}`;
        feedback.style.color = "red";
        wrongAnswers.push(currentVerb);
        updateWrongList();
      }

      if (currentVerb.pattern) {
        patternBox.textContent = `ğŸ” ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼š${currentVerb.pattern}`;
      }
      document.getElementById("translation").textContent = "æ„å‘³ï¼š" + currentVerb.translation;
      document.getElementById("example").textContent = "ä¾‹æ–‡ï¼š" + currentVerb.example;
      showConjugation();
    }

    function showConjugation() {
      const conj = conjugations[currentVerb.infinitive];
      if (conj) {
        const persons = ["yo", "tÃº", "Ã©l/ella/usted", "nosotros", "vosotros", "ellos/ellas/ustedes"];
        const html = conj.map((c, i) => `<div><strong>${persons[i]}:</strong> ${c}</div>`).join("");
        document.getElementById("conjugation").innerHTML = html;
      }
    }

    function nextQuestion() {
      displayVerb();
    }

    function updateWrongList() {
      const container = document.getElementById("wrongWords");
      container.innerHTML = "";
      const unique = [...new Set(wrongAnswers.map(v => v.infinitive))];
      unique.forEach(verb => {
        const div = document.createElement("div");
        div.className = "wrong-word";
        div.textContent = verb;
        container.appendChild(div);
      });
    }

    displayVerb();
  </script>
</body>
</html>
